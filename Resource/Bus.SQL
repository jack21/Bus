--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 7.5.848
--   Created On : 星期四, 04 三月, 2010 
--   DBMS       : MySql 
--   -------------------------------------------------- 


SET FOREIGN_KEY_CHECKS=0;



--  Create Tables 
CREATE TABLE Bus
(
	BusId INT NOT NULL AUTO_INCREMENT,
	BusNumber VARCHAR(8) NOT NULL,
	Driver VARCHAR(10),
	PRIMARY KEY (BusId),
	UNIQUE UQ_Bus_BusNumber(BusNumber)
) TYPE=InnoDB COMMENT='車輛';


CREATE TABLE CorpExp
(
	CorpExpId INTEGER NOT NULL AUTO_INCREMENT COMMENT 'PK',
	ExpTypeName VARCHAR(50) NOT NULL COMMENT '費用科目名稱',
	Years INTEGER NOT NULL COMMENT '費用年份',
	Months INTEGER NOT NULL COMMENT '費用月份',
	Fee INTEGER NOT NULL DEFAULT 0 COMMENT '費用',
	PRIMARY KEY (CorpExpId)
)  COMMENT='公司月費用';


CREATE TABLE CorpExpType
(
	CorpExpTypeId INTEGER NOT NULL AUTO_INCREMENT COMMENT 'PK',
	ExpTypeName VARCHAR(50) NOT NULL COMMENT '科目名稱',
	DefaultFee INTEGER NOT NULL DEFAULT 0 COMMENT '預設費用',
	PRIMARY KEY (CorpExpTypeId)
)  COMMENT='公司月費用科目';


CREATE TABLE DefaultExp
(
	DefaultExpId INTEGER NOT NULL AUTO_INCREMENT COMMENT 'PK',
	ExpCode VARCHAR(50) NOT NULL COMMENT '費用代號(對應到Exp的Column Name)',
	DisplayName VARCHAR(50) NOT NULL COMMENT '顯示名稱',
	DefaultValue INTEGER COMMENT '預設費用',
	PRIMARY KEY (DefaultExpId)
)  COMMENT='月費用預設值';


CREATE TABLE DefaultSalaryMisc
(
	DefaultSalaryMiscId INTEGER NOT NULL AUTO_INCREMENT COMMENT 'PK',
	Item VARCHAR(50) NOT NULL COMMENT '項目名稱',
	Cost INTEGER NOT NULL COMMENT '費用',
	PRIMARY KEY (DefaultSalaryMiscId)
)  COMMENT='預設薪資項目';


CREATE TABLE Exp
(
	ExpId INTEGER NOT NULL AUTO_INCREMENT COMMENT 'PK',
	BusNumber VARCHAR(8) NOT NULL COMMENT '車號',
	Years INTEGER NOT NULL COMMENT '年份',
	Months INTEGER NOT NULL COMMENT '月份',
	MemberFee INTEGER COMMENT '行費',
	Tax INTEGER COMMENT '稅金',
	DriverSalary INTEGER COMMENT '司機薪資',
	ServiceSalary INTEGER COMMENT '服務員薪資',
	UnionFee INTEGER COMMENT '公會會費',
	LicenceTax INTEGER COMMENT '燃料及牌照稅',
	ParkFee INTEGER COMMENT '停車費',
	Toll INTEGER COMMENT '過路費',
	FixFee INTEGER COMMENT '修理費',
	Incidental INTEGER COMMENT '雜費',
	Cellphone INTEGER COMMENT '行動電話',
	Insurance INTEGER COMMENT '勞健保',
	Reserve INTEGER COMMENT '站費洗車',
	Reserve1 INTEGER COMMENT '保留一',
	Reserve2 INTEGER COMMENT '保留二',
	Reserve3 INTEGER COMMENT '保留三',
	Reserve4 INTEGER COMMENT '保留四',
	Note VARCHAR(255) COMMENT '備註',
	PRIMARY KEY (ExpId),
	INDEX ID_BusNumber (BusNumber ASC),
	INDEX ID_Years (Years ASC),
	INDEX ID_Month (Months ASC)
) TYPE=InnoDB COMMENT='月費用';


CREATE TABLE Fix
(
	FixId INT NOT NULL AUTO_INCREMENT,
	MDate DATE,
	BusNum VARCHAR(10),
	Mileage VARCHAR(50),
	Money INT,
	Item VARCHAR(30),
	Visa VARCHAR(50),
	Note VARCHAR(50),
	Factory VARCHAR(20),
	PRIMARY KEY (FixId),
	INDEX ID_Date (MDate ASC),
	INDEX ID_BusNumber (BusNum ASC)
) TYPE=InnoDB COMMENT='修理費';


CREATE TABLE Fixmaster
(
	FixMasterId INT NOT NULL AUTO_INCREMENT,
	Year VARCHAR(4) NOT NULL,
	BusNum VARCHAR(7) NOT NULL,
	OwnerName VARCHAR(50),
	OwnerAddress VARCHAR(50),
	OwnerPhone VARCHAR(12),
	UserName VARCHAR(50),
	UserAddress VARCHAR(50),
	UserPhone VARCHAR(12),
	Number VARCHAR(50),
	EngineNumber VARCHAR(50),
	Insurance1Data VARCHAR(50),
	Insurance1Category VARCHAR(50),
	Insurance1Number VARCHAR(50),
	Insurance1During VARCHAR(50),
	Insurance2Data VARCHAR(50),
	Insurance2Category VARCHAR(50),
	Insurance2Number VARCHAR(50),
	Insurance2During VARCHAR(50),
	PRIMARY KEY (FixMasterId),
	UNIQUE ID_YearBusNumber(Year, BusNum)
) TYPE=InnoDB COMMENT='InnoDB free: 20480 kB';


CREATE TABLE SalaryMisc
(
	SalaryMiscId INT NOT NULL AUTO_INCREMENT,
	Date DATE,
	BusNumber VARCHAR(8),
	Item VARCHAR(50),
	Cost INT,
	PRIMARY KEY (SalaryMiscId),
	INDEX ID_BusNumber (BusNumber ASC),
	INDEX ID_Date (Date ASC)
) TYPE=InnoDB COMMENT='薪水';


CREATE TABLE Travel
(
	TravelId INT NOT NULL AUTO_INCREMENT,
	BusNumber VARCHAR(8),
	TravelDate DATE,
	Custom VARCHAR(30),
	Travel VARCHAR(50),
	Groups VARCHAR(50),
	Turnover INT,
	Turnover2 INT,
	TravelExp INT,
	OilExp INT,
	FirstIncome INT,
	FirstIncomeDate DATE,
	SecondIncome INT,
	SecondIncomeDate DATE,
	Tips INT,
	Tips2 INT,
	Note VARCHAR(50),
	Note2 VARCHAR(50),
	StartTime VARCHAR(5),
	EndTime VARCHAR(5),
	PRIMARY KEY (TravelId),
	INDEX ID_BusNumber (BusNumber ASC),
	INDEX ID_Custom (Custom ASC),
	INDEX ID_Groups (Groups ASC),
	INDEX ID_TravelDate (TravelDate ASC)
) TYPE=InnoDB COMMENT='行程';



SET FOREIGN_KEY_CHECKS=1;
